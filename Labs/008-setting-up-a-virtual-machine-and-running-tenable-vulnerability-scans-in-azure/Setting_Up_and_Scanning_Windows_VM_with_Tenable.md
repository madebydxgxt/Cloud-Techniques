# Setting Up and Scanning a Windows VM with Tenable (Azure)

This lab walks through creating a Windows virtual machine in Azure, configuring networking and firewall settings, and running vulnerability scans using Tenable.

## Watch me build this lab
https://www.loom.com/share/97047010c4914b7da2c0bb4d135110e4

**What this video shows:** Deploying a Windows VM in Azure, configuring a Network Security Group, disabling Windows Firewall for testing, and running both unauthorized and authorized Tenable scans.

---

## Objective
Deploy a Windows virtual machine in Azure and perform both unauthorized and authorized vulnerability scans using Tenable to compare visibility and findings.

---

## Skills Practiced
- Creating Azure Virtual Machines  
- Managing subscriptions and resource groups  
- Configuring Azure Virtual Networks and subnets  
- Creating and associating Network Security Groups (NSGs)  
- Understanding inbound and outbound security rules  
- Disabling Windows Firewall for testing purposes  
- Running unauthorized (credential-less) vulnerability scans  
- Running authorized (credential-based) vulnerability scans  
- Interpreting Tenable vulnerability scan results  

---

## Tools Used
- Microsoft Azure Portal  
- Azure Virtual Machine (Windows 11 Pro / Windows Server)  
- Azure Virtual Network (VNet) and Subnet  
- Azure Network Security Group (NSG)  
- Azure Bastion  
- Windows Defender Firewall  
- Tenable Vulnerability Management  
- Tenable Internal Scan Engine  

---

## Steps Performed

## Setting Up a Virtual Machine and Running Tenable Vulnerability Scan

**1. Access Azure and Create a Virtual Machine** [0:00](https://loom.com/share/97047010c4914b7da2c0bb4d135110e4?t=0)
![image alt](https://github.com/madebydxgxt/Cloud-Techniques/blob/main/Labs/008-setting-up-a-virtual-machine-and-running-tenable-vulnerability-scans-in-azure/artifacts/1.jpg?raw=true)

- Ensure you have access to an Azure account.
- Navigate to the Azure portal and select your subscription (e.g., Cyber Range 1).
- Create a new virtual machine (VM) and name it (e.g., vscan).
- Choose the appropriate region (e.g., East Coast).
- Set availability options (no redundancy needed for this setup).

**2. Configure Virtual Machine Settings** [1:16](https://loom.com/share/97047010c4914b7da2c0bb4d135110e4?t=76)
![image alt](https://github.com/madebydxgxt/Cloud-Techniques/blob/main/Labs/008-setting-up-a-virtual-machine-and-running-tenable-vulnerability-scans-in-azure/artifacts/2.jpg?raw=true)


- Select the operating system (Windows 11 Pro 64).
- Choose the virtual network (Cyber Range VNet) and subnet (Cyber Range subnet).
- Set public IP to 'none' for local network scanning.
- Skip network security group setup for now.

**3. Provision the Virtual Machine** [2:47](https://loom.com/share/97047010c4914b7da2c0bb4d135110e4?t=167)
![image alt](https://github.com/madebydxgxt/Cloud-Techniques/blob/main/Labs/008-setting-up-a-virtual-machine-and-running-tenable-vulnerability-scans-in-azure/artifacts/3.jpg?raw=true)


- Review settings and create the virtual machine.
- Wait for the provisioning process to complete.

**4. Connect to the Virtual Machine** [3:41](https://loom.com/share/97047010c4914b7da2c0bb4d135110e4?t=221)
![image alt](https://github.com/madebydxgxt/Cloud-Techniques/blob/main/Labs/008-setting-up-a-virtual-machine-and-running-tenable-vulnerability-scans-in-azure/artifacts/4.jpg?raw=true)


- Use Bastion to connect to the VM if it has a private IP.
- Connect via RDP (Remote Desktop Protocol).

**5. Set Up Network Security Group (NSG)** [4:42](https://loom.com/share/97047010c4914b7da2c0bb4d135110e4?t=282)
![image alt](https://github.com/madebydxgxt/Cloud-Techniques/blob/main/Labs/008-setting-up-a-virtual-machine-and-running-tenable-vulnerability-scans-in-azure/artifacts/5.jpg?raw=true)


- Associate the NSG with the virtual machine.
- Check network settings to ensure the NSG is connected.
- Review inbound and outbound traffic rules.

**6. Disable Windows Firewall** [6:43](https://loom.com/share/97047010c4914b7da2c0bb4d135110e4?t=403)
![image alt](https://github.com/madebydxgxt/Cloud-Techniques/blob/main/Labs/008-setting-up-a-virtual-machine-and-running-tenable-vulnerability-scans-in-azure/artifacts/5.jpg?raw=true)


- Open Windows Defender Firewall settings.
- Disable the firewall for domain, private, and public profiles to allow all traffic.

**7. Log into Tenable and Create a Scan** [8:03](https://loom.com/share/97047010c4914b7da2c0bb4d135110e4?t=483)

- Access Tenable and navigate to Vulnerability Management.
- Click on 'Scans' and then 'Create Scan'.
- Choose 'Basic Network Scan' and name it (e.g., vScan01).
- Select 'Internal Scanner' since there is no public IP.

**8. Input Target IP Address** [9:35](https://loom.com/share/97047010c4914b7da2c0bb4d135110e4?t=575)
![image alt](https://github.com/madebydxgxt/Cloud-Techniques/blob/main/Labs/008-setting-up-a-virtual-machine-and-running-tenable-vulnerability-scans-in-azure/artifacts/8.jpg?raw=true)


- Retrieve the private IP address of the virtual machine from Azure.
- Enter the private IP address as the target for the scan.

**9. Configure Scan Settings** [10:13](https://loom.com/share/97047010c4914b7da2c0bb4d135110e4?t=613)
![image alt](https://github.com/madebydxgxt/Cloud-Techniques/blob/main/Labs/008-setting-up-a-virtual-machine-and-running-tenable-vulnerability-scans-in-azure/artifacts/9.jpg?raw=true)


- Set discovery options (e.g., ping remote host).
- Choose to run an unauthorized scan (no credentials).

**10. Launch the Unauthorized Scan** [11:06](https://loom.com/share/97047010c4914b7da2c0bb4d135110e4?t=666)
![image alt](https://github.com/madebydxgxt/Cloud-Techniques/blob/main/Labs/008-setting-up-a-virtual-machine-and-running-tenable-vulnerability-scans-in-azure/artifacts/10.jpg?raw=true)


- Save and launch the scan to initialize the vulnerability assessment.

**11. Run an Authorized Scan** [12:06](https://loom.com/share/97047010c4914b7da2c0bb4d135110e4?t=726)
![image alt](https://github.com/madebydxgxt/Cloud-Techniques/blob/main/Labs/008-setting-up-a-virtual-machine-and-running-tenable-vulnerability-scans-in-azure/artifacts/11.jpg?raw=true)


- Edit the scan to add credentials for an authorized scan.
- Input the username and password for the virtual machine.
- Save and launch the scan again.

**12. Review Scan Results** [13:01](https://loom.com/share/97047010c4914b7da2c0bb4d135110e4?t=781)
![image alt](https://github.com/madebydxgxt/Cloud-Techniques/blob/main/Labs/008-setting-up-a-virtual-machine-and-running-tenable-vulnerability-scans-in-azure/artifacts/12.jpg?raw=true)


- Analyze the scan results for vulnerabilities.
- Download reports to help mitigate identified vulnerabilities.
---

## Outcome
Successfully deployed a Windows virtual machine in Azure, configured network security controls, and executed both unauthorized and authorized Tenable scans to evaluate system vulnerabilities and visibility differences.
